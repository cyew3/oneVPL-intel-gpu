/* ****************************************************************************** *\

INTEL CORPORATION PROPRIETARY INFORMATION
This software is supplied under the terms of a license agreement or nondisclosure
agreement with Intel Corporation and may not be copied or disclosed except in
accordance with the terms of that agreement
Copyright(c) 2021 Intel Corporation. All Rights Reserved.

\* ****************************************************************************** */

#pragma once

#include "reference_query_impls_codec.h"

namespace query_impls_description
{
    class ReferenceEncode
    {
    public:
        RefDesCodec& GetReference()
        {
            return m_reference;
        }
    protected:
        RefDesCodec m_reference = {{
    START_CODEC(MFX_CODEC_MPEG2, MFX_LEVEL_MPEG2_HIGH, 1)
        START_PROFILE(MFX_PROFILE_MPEG2_SIMPLE)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_MPEG2_MAIN)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_MPEG2_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 1920, 16, 16, 1920, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
    END_CODEC
    START_CODEC(MFX_CODEC_JPEG, MFX_LEVEL_UNKNOWN, 0)
        START_PROFILE(MFX_PROFILE_JPEG_BASELINE)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 1, 16384, 1, 1, 16384, 1, MFX_FOURCC_NV12,
                MFX_FOURCC_YV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 1, 16384, 1, 1, 16384, 1, MFX_FOURCC_NV12,
                MFX_FOURCC_YV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 1, 16384, 1, 1, 16384, 1, MFX_FOURCC_NV12,
                MFX_FOURCC_YV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4)
#endif
        END_PROFILE
    END_CODEC
    START_CODEC(MFX_CODEC_AVC, MFX_LEVEL_AVC_52, 1)
        START_PROFILE(MFX_PROFILE_AVC_BASELINE)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_CONSTRAINED_BASELINE)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_MAIN)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_CONSTRAINED_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_PROGRESSIVE_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4,
                MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
    END_CODEC
    START_CODEC(MFX_CODEC_HEVC, (MFX_TIER_HEVC_HIGH | MFX_LEVEL_HEVC_62), 1)
        START_PROFILE(MFX_PROFILE_HEVC_MAIN)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_NV12, MFX_FOURCC_RGB4)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_NV12, MFX_FOURCC_RGB4)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_NV12, MFX_FOURCC_RGB4)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_MAINSP)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_NV12, MFX_FOURCC_RGB4)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_NV12, MFX_FOURCC_RGB4)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_NV12, MFX_FOURCC_RGB4)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_MAIN10)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_P010, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12,
                MFX_FOURCC_RGB4)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_P010, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12,
                MFX_FOURCC_RGB4)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 8192, 8, 8, 8192, 8, MFX_FOURCC_P010, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12,
                MFX_FOURCC_RGB4)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_REXT)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_SCC)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
    END_CODEC
    START_CODEC(MFX_CODEC_VP9, MFX_LEVEL_UNKNOWN, 0)
        START_PROFILE(MFX_PROFILE_VP9_0)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_VP9_1)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_VP9_2)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_VP9_3)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 8192, 16, 16, 8192, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010,
                MFX_FOURCC_AYUV, MFX_FOURCC_Y410)
#endif
        END_PROFILE
    END_CODEC
        }};
    };
    class ReferenceEncodeDefault : public ReferenceEncode
    {
    public:
        ReferenceEncodeDefault()
        {
            m_reference.Codecs.clear();
        }
    };
    static ReferenceEncodeDefault ref_default_enc;

    class ReferenceEncodeATS : public ReferenceEncode
    {
    public:
        ReferenceEncodeATS()
        {
            // Update AVC encode
            m_reference.Codecs.erase((mfxU32)MFX_CODEC_AVC);
            std::map<mfxU32, CodecDesc> avce = {
    START_CODEC(MFX_CODEC_AVC, MFX_LEVEL_AVC_52, 1)
        START_PROFILE(MFX_PROFILE_AVC_BASELINE)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_CONSTRAINED_BASELINE)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_MAIN)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_CONSTRAINED_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_PROGRESSIVE_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12)
#endif
        END_PROFILE
    END_CODEC
            };
            m_reference.Codecs.emplace(MFX_CODEC_AVC, avce[MFX_CODEC_AVC]);
        }
    };
    static ReferenceEncodeATS ref_ATS_enc;
    // TODO: replace w / MFX_PROFILE_AV1_..., currently none of API profiles supported
    const uint16_t AV1_SEQ_PROFILE_0_420_8or10bit = 0x0; 
    class ReferenceEncodeDG2 : public ReferenceEncode
    {
    public:
        ReferenceEncodeDG2()
        {
            // No MPEG2e starting from DG2
            m_reference.Codecs.erase((mfxU32)MFX_CODEC_MPEG2);

            // AV1e starting from DG2
            std::map<mfxU32, CodecDesc> av1e = {
    START_CODEC(MFX_CODEC_AV1, MFX_LEVEL_AV1_63, 1)
        START_PROFILE(AV1_SEQ_PROFILE_0_420_8or10bit)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 16384, 16, 16, 16384, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 16384, 16, 16, 16384, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 16384, 16, 16, 16384, 16, MFX_FOURCC_NV12, MFX_FOURCC_P010)
#endif
        END_PROFILE
    END_CODEC
            };
            m_reference.Codecs.emplace(MFX_CODEC_AV1, av1e[MFX_CODEC_AV1]);

            // HEVCe VDEnc does not support 12b encoding
            std::map<mfxU32, ProfileDesc> h265deltaProfiles = {
        START_PROFILE(MFX_PROFILE_HEVC_REXT)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_SCC)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_AYUV)
#endif
        END_PROFILE
            };
            m_reference.Codecs[MFX_CODEC_HEVC].Profiles[MFX_PROFILE_HEVC_REXT] = h265deltaProfiles[MFX_PROFILE_HEVC_REXT];
            m_reference.Codecs[MFX_CODEC_HEVC].Profiles[MFX_PROFILE_HEVC_SCC] = h265deltaProfiles[MFX_PROFILE_HEVC_SCC];
        }
    };
    static ReferenceEncodeDG2 ref_DG2_enc;

    class ReferenceEncodeTGL : public ReferenceEncode
    {
    public:
        ReferenceEncodeTGL()
        {
            // Update AVC encode
            m_reference.Codecs.erase((mfxU32)MFX_CODEC_AVC);
            std::map<mfxU32, CodecDesc> avce = {
    START_CODEC(MFX_CODEC_AVC, MFX_LEVEL_AVC_52, 1)
        START_PROFILE(MFX_PROFILE_AVC_BASELINE)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64)
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_MAIN)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64)
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_STEREO_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64)
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64)
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_CONSTRAINED_BASELINE)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64)
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_CONSTRAINED_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64)
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_AVC_PROGRESSIVE_HIGH)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64)
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 16, 4096, 16, 16, 4096, 16, MFX_FOURCC_NV12, MFX_FOURCC_RGB4, MFX_FOURCC_BGR4, MFX_FOURCC_YUY2, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
    END_CODEC
            };
            m_reference.Codecs.emplace(MFX_CODEC_AVC, avce[MFX_CODEC_AVC]);

            // Update HEVC encode
            m_reference.Codecs.erase((mfxU32)MFX_CODEC_HEVC);
            std::map<mfxU32, CodecDesc> hevce = {
    START_CODEC(MFX_CODEC_HEVC, (MFX_TIER_HEVC_HIGH | MFX_LEVEL_HEVC_62), 1)
        START_PROFILE(MFX_PROFILE_HEVC_MAIN)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_MAIN10)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_MAINSP)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_REXT)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
        START_PROFILE(MFX_PROFILE_HEVC_SCC)
            MEMDESC(MFX_RESOURCE_SYSTEM_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#if defined(_WIN32) || defined(_WIN64) 
            MEMDESC(MFX_RESOURCE_DX11_TEXTURE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#else
            MEMDESC(MFX_RESOURCE_VA_SURFACE, 8, 16384, 8, 8, 12288, 8, MFX_FOURCC_P010, MFX_FOURCC_P210, MFX_FOURCC_Y210,
                MFX_FOURCC_Y410, MFX_FOURCC_A2RGB10, MFX_FOURCC_NV12, MFX_FOURCC_YUY2, MFX_FOURCC_RGB4,
                MFX_FOURCC_P016, MFX_FOURCC_Y216, MFX_FOURCC_Y416, MFX_FOURCC_AYUV)
#endif
        END_PROFILE
    END_CODEC
            };
            m_reference.Codecs.emplace(MFX_CODEC_HEVC, hevce[MFX_CODEC_HEVC]);
        }
    };
    static ReferenceEncodeTGL ref_TGL_enc;
    typedef ReferenceEncodeTGL ReferenceEncodeDG1;
    static ReferenceEncodeDG1 ref_DG1_enc;
    typedef ReferenceEncodeTGL ReferenceEncodeADL;
    static ReferenceEncodeADL ref_ADL_enc;
}
